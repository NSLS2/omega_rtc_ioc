# Read temperature
record(ai, "$(Sys)$(Dev)T-I")
{
	field(DTYP, "stream")
	field(DESC, "Process Temperature")
	field(INP,  "@omega-CNi32.proto ReadX($(Chan),01) $(PORT)")
	field(EGU,  "C")
	field(SCAN, "$(PERIOD=2) second")
	field(HIHI, $(HIHI="30"))
	field(HIGH, $(HIGH="27"))
	field(LOLO, $(LOLO="15"))
	field(LOW,  $(LOW="18"))
	field(HOPR, $(HIGH="20"))
	field(LOPR, "15")
	field(PREC, "1")
	field(HHSV, "MAJOR")
	field(HSV,  "MINOR")
	field(LLSV, "MINOR")
	field(LSV,  "MINOR")

	info(autosaveFields, "LOLO LOW HIGH HIHI LLSV LSV HSV HHSV SCAN")
}

# Read setpoint
record(ai, "$(Sys)$(Dev)T:SP1-RB")
{
	field(DTYP, "stream")
	field(DESC, "Setpoint Temperature Readback")
	field(INP,  "@omega-CNi32.proto ReadSP($(Chan),01) $(PORT)")
	field(EGU,  "C")
	field(LINR, "SLOPE")
	field(ESLO, "0.1")
	field(PREC, "1")
	field(SCAN, "10 second")
	field(FLNK, "$(Sys)$(Dev)T:GainPB-RB")
}

# Set setpoint, default value is 20C
record(ao, "$(Sys)$(Dev)T:SP1-SP")
{
	field(DTYP, "stream")
	field(DESC, "Setpoint Temperature")
	field(OUT,  "@omega-CNi32.proto WriteSP($(Chan),01) $(PORT)")
	field(EGU,  "C")
	field(LINR, "SLOPE")
	field(ESLO, "0.1")
	field(PREC, "1")
	field(VAL,  "20")
	info(autosaveFields, "VAL")
}

record(ai, "$(Sys)$(Dev)T:GainPB-RB")
{
	field(DTYP, "stream")
	field(DESC, "Proportional Band 1")
	field(INP,  "@omega-CNi32.proto ReadPID($(Chan),17) $(PORT)")
	field(EGU,  "C")
	field(LINR, "SLOPE")
	field(ESLO, "0.1")
	field(PREC, "1")
	field(FLNK, "$(Sys)$(Dev)T:GainI-RB")
}

record(longin, "$(Sys)$(Dev)T:GainI-RB")
{
	field(DTYP, "stream")
	field(DESC, "Integral/Reset 1")
	field(INP,  "@omega-CNi32.proto ReadPID($(Chan),18) $(PORT)")
	field(EGU,  "Seconds")
	field(FLNK, "$(Sys)$(Dev)T:GainD-RB")
}

record(ai, "$(Sys)$(Dev)T:GainD-RB")
{
	field(DTYP, "stream")
	field(DESC, "Derivative/Rate 1")
	field(INP,  "@omega-CNi32.proto ReadPID($(Chan),19) $(PORT)")
	field(EGU,  "Seconds")
	field(LINR, "SLOPE")
	field(ESLO, "0.1")
	field(PREC, "1")
}

record(ao, "$(Sys)$(Dev)T:GainPB-SP")
{
	field(DTYP, "stream")
	field(DESC, "Proportional Band 1")
	field(OUT,  "@omega-CNi32.proto WritePID($(Chan),17) $(PORT)")
	field(EGU,  "C")
	field(DRVL, "0")
	field(DRVH, "999.9")
	field(LINR, "SLOPE")
	field(ESLO, "0.1")
	field(PREC, "1")
	field(VAL,  $(PVAL="2.0"))

	info(autosaveFields_pass0, "VAL")
}

record(longout, "$(Sys)$(Dev)T:GainI-SP")
{
	field(DTYP, "stream")
	field(DESC, "Integral/Reset 1")
	field(OUT,  "@omega-CNi32.proto WritePID($(Chan),18) $(PORT)")
	field(EGU,  "Seconds")
	field(DRVL, "0")
	field(DRVH, "3999")
	field(VAL,  $(IVAL="50"))
	info(autosaveFields_pass0, "VAL")
}

record(ao, "$(Sys)$(Dev)T:GainD-SP")
{
	field(DTYP, "stream")
	field(DESC, "Derivative/Rate 1")
	field(OUT,  "@omega-CNi32.proto WritePID($(Chan),19) $(PORT)")
	field(EGU,  "Seconds")
	field(DRVL, "0")
	field(LINR, "SLOPE")
	field(ESLO, "0.1")
	field(DRVH, "399.9")
	field(VAL,  $(DVAL="0"))
	field(PREC, "1")

	info(autosaveFields_pass0, "VAL")
}

record(bo, "$(Sys)$(Dev)T:Init-Cmd")
{
        field(DTYP, "stream")
        field(DESC, "Init")
        field(OUT,  "@omega-CNi32.proto init($(Chan),$(Sys)$(Dev)) $(PORT)")
	field(PINI, "1")
}

record(bo, "$(Sys)$(Dev)T:Reset-Cmd")
{
        field(DTYP, "stream")
        field(DESC, "Reset")
        field(OUT,  "@omega-CNi32.proto reset($(Chan)) $(PORT)")
}

record(seq, "$(Sys)$(Dev)Init-Seq_")
{
        field(DESC, "Init Sequence")
        field(SELM, "All")
        field(DO1,  "20")
        field(DO2,  $(PVAL="2"))
        field(DO3,  $(IVAL="50"))
        field(DO4,  $(DVAL="0"))
        field(LNK1, "$(Sys)$(Dev)T:SP1-SP PP")
        field(LNK2, "$(Sys)$(Dev)T:GainPB-SP PP")
        field(LNK3, "$(Sys)$(Dev)T:GainI-SP PP")
        field(LNK4, "$(Sys)$(Dev)T:GainD-SP PP")
        field(DLY1, "1")
        field(DLY2, "2")
        field(DLY3, "3")
        field(DLY4, "4")
        field(PINI, "1")
}
